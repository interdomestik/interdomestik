---
task_name: 'refine Novu'
task_type: 'Feature'
priority: 'P1-High'
estimate: '2h'
test_level: 'unit'
roadmap_ref: 'Phase 2, Week 8'
branch: 'feat/refine-novu'
start_time: 'Wed Dec 17 08:15:46 CET 2025'
baseline:
  lint: 'pass'
  typecheck: 'pass'
  tests: 'pass'
---

# ğŸš€ Current Task: refine Novu

## ğŸ“‹ 10x Context Prompt

Copy the block below to your Agent to start with maximum context:

```xml
<task_definition>
  <objective>refine Novu</objective>
  <type>Feature</type>
  <priority>P1-High</priority>
  <estimate>2h</estimate>
  <branch>feat/refine-novu</branch>
  <constraints>
    - Use @interdomestik/ui components
    - Follow 10x-coding rules (Explore â†’ Plan â†’ Execute)
    - Mobile-first approach
    - Use next-intl for i18n
    - Write tests as specified in testing checklist
  </constraints>
</task_definition>

<user_story>
  As an admin/agent, I want to be able to assign claims to agents
  so that the assignee is notified and responsible for the claim.
</user_story>
<acceptance_criteria>
  - [ ] Add `agentId` to `claims` table in database schema
  - [ ] Implement `assignClaim` server action
  - [ ] Trigger `claim_assigned` notification on assignment
  - [ ] (Refinement) Ensure email field is correctly passed for notifications
  - [ ] (Refinement) Check if `preferences` page skeleton can be added
</acceptance_criteria>
```

## ğŸ—ï¸ Status Tracker

## ğŸ—ï¸ Status Tracker

- [ ] **Exploration**: Identify assignment logic (missing)
- [ ] **Database**: Update schema to include `agentId`
- [ ] **Migration**: Run `db:generate` / `db:push` (local)
- [ ] **Implementation**: Implement `assignClaim` action + Notification
- [ ] **Verification**: Add unit tests for assignment

## ğŸ§ª Testing Checklist

- [ ] Unit tests added: `src/**/*.test.ts`
- [ ] Tests use factories from `src/test/factories.ts`
- [ ] Run: `pnpm test:unit`
- [ ] All tests pass

## âœ… Definition of Done

- [ ] All acceptance criteria met
- [ ] Tests pass at required level (unit)
- [ ] `pnpm lint` passes (or no new errors)
- [ ] `pnpm type-check` passes
- [ ] No regressions from baseline
- [ ] (Recommended) `pnpm qa:full` or full checks executed before PR
- [ ] Screenshots added for UI changes (if applicable)
- [ ] Documentation updated (if applicable)
- [ ] Code reviewed / self-reviewed

## ğŸ”— Related Files

<!-- Add discovered file paths here -->

## ğŸ“‚ Active Context

<!-- Paste file paths or code snippets here as you discover them -->

## ğŸ“ Implementation Notes

<!-- Add decisions, trade-offs, blockers here -->

## ğŸ”¬ QA Baseline (at task start)

| Metric     | Status |
| ---------- | ------ |
| Lint       | pass   |
| Type Check | pass   |
| Unit Tests | pass   |

---

## ğŸ“ PR Template (Copy when done)

```markdown
## What

refine Novu

## Why

Phase 2, Week 8

## How

<!-- Implementation approach -->

## Testing

- [ ] Unit tests pass (`pnpm test:unit`)
- [ ] E2E tests pass (`pnpm test:e2e`)
- [ ] Manual QA completed
- [ ] No regressions in existing functionality

## Screenshots (if UI changes)

<!-- Add screenshots here -->

## Notes to Reviewer

<!-- Highlight areas needing careful review, known limitations, or follow-up tasks -->
```

---

## ğŸ“Š Task Completion

- **End Time**: Wed Dec 17 08:20:14 CET 2025
- **Outcome**: Completed âœ…
- **Summary**: Added agentId to schema and implemented assignClaim action with notifications.

### Final QA Status

- Lint Errors: 2
- Type Check: fail
- Unit Tests: pass

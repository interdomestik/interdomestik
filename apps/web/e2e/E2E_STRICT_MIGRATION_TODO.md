# E2E Strict Migration TODO

Purpose: inventory remaining non-strict E2E specs and track one-by-one migrations under strict rules.

Legend:

- Reasons: page.goto / no-marker / text-selector / locale-api / ad-hoc-url / routes-contract

## Scope: Core strict suites (already done)

These suites were completed in Phases 1–5 and are not part of the remaining backlog:

- apps/web/e2e/golden/\*\*
- apps/web/e2e/gate/\*\*

## Scope: Legacy/non-strict backlog

### Highest ROI (Top 15)

| Spec                                          | Status  | Reasons                              | Commit  | Testids added                                                                                                                                       | Marker used                                                                        | Verification command                                                                                                                                  | Lane        | Lane rationale          | Touches UI?                                                                                                             | Strict exceptions allowed? | Failure signature                            | Regression guard run                                                                                                                                                                  | Notes                                                                                      |
| --------------------------------------------- | ------- | ------------------------------------ | ------- | --------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------- | ----------- | ----------------------- | ----------------------------------------------------------------------------------------------------------------------- | -------------------------- | -------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------ |
| apps/web/e2e/admin-claims-v2.spec.ts          | ✅ DONE | routes-contract, text-selector       | 105087a | next-action-assign                                                                                                                                  | page-ready                                                                         | pnpm --filter @interdomestik/web test:e2e -- apps/web/e2e/admin-claims-v2.spec.ts --project=gate-ks-sq --project=gate-mk-mk --max-failures=1          | ks-sq/mk-mk | admin seeded data       | apps/web/src/features/admin/claims/components/ops/NextActionPrimary.tsx                                                 | no                         | TypeError: path.startsWith is not a function | pnpm --filter @interdomestik/web e2e:gate && pnpm --filter @interdomestik/web test:e2e:phase5                                                                                         | gotoApp path normalized to string                                                          |
| apps/web/e2e/multi-user-flow.spec.ts          | ✅ DONE | page.goto, ad-hoc-url, text-selector | c53e789 | —                                                                                                                                                   | page-ready/body/ops-center-page/admin-users-page/agent-pro-shell                   | pnpm --filter @interdomestik/web test:e2e -- apps/web/e2e/multi-user-flow.spec.ts --project=gate-ks-sq --project=gate-mk-mk --max-failures=1          | ks-sq/mk-mk | requires setup projects | —                                                                                                                       | no                         | 307 redirect expectation vs 200 unauth body  | pnpm --filter @interdomestik/web e2e:gate:fast && pnpm --filter @interdomestik/web e2e:gate && pnpm --filter @interdomestik/web test:e2e:phase5                                       | used fresh request context; allow unauth 200 (login/not-found)                             |
| apps/web/e2e/rbac.spec.ts                     | ✅ DONE | page.goto, text-selector             | fb4612f | —                                                                                                                                                   | body/page-ready/agent-home                                                         | pnpm --filter @interdomestik/web test:e2e -- apps/web/e2e/rbac.spec.ts --project=gate-ks-sq --project=gate-mk-mk --max-failures=1                     | ks-sq/mk-mk | access control coverage | —                                                                                                                       | no                         | 404 heading expectations replaced            | pnpm --filter @interdomestik/web e2e:gate:fast && pnpm --filter @interdomestik/web e2e:gate && pnpm --filter @interdomestik/web test:e2e:phase5                                       | assertAccessDenied; added adminAnalytics/adminSettings routes                              |
| apps/web/e2e/rbac-isolation.spec.ts           | ✅ DONE | page.goto, text-selector             | d39ee8a | —                                                                                                                                                   | page-ready                                                                         | pnpm --filter @interdomestik/web test:e2e -- apps/web/e2e/rbac-isolation.spec.ts --project=gate-ks-sq --project=gate-mk-mk --max-failures=1           | ks-sq/mk-mk | cross-tenant isolation  | —                                                                                                                       | no                         | 403 text checks replaced                     | pnpm --filter @interdomestik/web e2e:gate:fast && pnpm --filter @interdomestik/web e2e:gate && pnpm --filter @interdomestik/web test:e2e:phase5                                       | origin-based API checks; gotoApp routes                                                    |
| apps/web/e2e/member-flow.spec.ts              | ✅ DONE | page.goto, text-selector             | 329c0c9 | dashboard-heading, referral-card, sidebar-nav-\*                                                                                                    | dashboard-page-ready, claims-page-ready, new-claim-page-ready, settings-page-ready | pnpm --filter @interdomestik/web test:e2e -- apps/web/e2e/member-flow.spec.ts --project=gate-ks-sq --project=gate-mk-mk --max-failures=1              | ks-sq/mk-mk | seeded member data      | components/dashboard/\*, components/member/referral-card.tsx, member pages                                              | no                         | [getLocale] Contract Violation               | pnpm --filter @interdomestik/web e2e:gate && pnpm --filter @interdomestik/web test:e2e:phase5                                                                                         | —                                                                                          |
| apps/web/e2e/claim-tracking.ks.spec.ts        | ✅ DONE | page.goto, ad-hoc-url, text-selector | 5ae6cc6 | claim-tracking-title, claim-status-badge, share-tracking-link, claim-timeline                                                                       | page-ready                                                                         | pnpm --filter @interdomestik/web test:e2e -- apps/web/e2e/claim-tracking.ks.spec.ts --project=gate-ks-sq --project=gate-mk-mk --max-failures=1        | ks-sq/mk-mk | KS claim flow           | apps/web/src/features/member/claims/components/MemberClaimDetail\*.tsx, apps/web/src/app/[locale]/agent/claims/page.tsx | no                         | missing claim-status-badge testid            | pnpm --filter @interdomestik/web e2e:gate:fast && pnpm --filter @interdomestik/web test:e2e:phase5 && bash scripts/e2e-strict-guards.sh                                               | moved to gotoApp+routes; origin-based API login                                            |
| apps/web/e2e/production.spec.ts               | ✅ DONE | page.goto, ad-hoc-url, text-selector | 8a61186 | —                                                                                                                                                   | dashboard-page-ready, new-claim-page-ready, claims-page-ready, page-ready          | pnpm --filter @interdomestik/web test:e2e -- apps/web/e2e/production.spec.ts --project=gate-ks-sq --project=gate-mk-mk --max-failures=1               | ks-sq/mk-mk | production smoke        | —                                                                                                                       | no                         | strict-mode multi-match; admin rows mismatch | pnpm --filter @interdomestik/web e2e:gate:fast && pnpm --filter @interdomestik/web test:e2e:phase5 && pnpm --filter @interdomestik/web e2e:guards                                     | gotoApp+routes; origin API login; per-project claim title; supports ops cards/legacy rows  |
| apps/web/e2e/full-seed.spec.ts                | ✅ DONE | page.goto, ad-hoc-url, text-selector | eb38fb7 | —                                                                                                                                                   | dashboard-page-ready, page-ready                                                   | pnpm --filter @interdomestik/web test:e2e -- apps/web/e2e/full-seed.spec.ts --project=gate-ks-sq --project=gate-mk-mk --max-failures=1                | ks-sq/mk-mk | heavy seed dependencies | —                                                                                                                       | no                         | lead status label mismatch                   | pnpm --filter @interdomestik/web test:e2e -- apps/web/e2e/full-seed.spec.ts --project=gate-ks-sq --project=gate-mk-mk --max-failures=1 && pnpm --filter @interdomestik/web e2e:guards | unskipped; gotoApp+routes; origin API login; assert pending via seeded row testid          |
| apps/web/e2e/admin-flow.spec.ts               | ✅ DONE | page.goto, routes-contract           | a82126d | —                                                                                                                                                   | dashboard-page-ready, page-ready                                                   | pnpm --filter @interdomestik/web test:e2e -- apps/web/e2e/admin-flow.spec.ts --project=gate-ks-sq --project=gate-mk-mk --max-failures=1               | ks-sq/mk-mk | admin workflows         | —                                                                                                                       | no                         | mk 404 heading mismatch                      | pnpm --filter @interdomestik/web e2e:guards                                                                                                                                           | gotoApp+routes; include MK 404 assertion                                                   |
| apps/web/e2e/agent-flow.spec.ts               | ✅ DONE | page.goto, routes-contract           | 2b7f3a7 | —                                                                                                                                                   | dashboard-page-ready                                                               | pnpm --filter @interdomestik/web test:e2e -- apps/web/e2e/agent-flow.spec.ts --project=gate-ks-sq --project=gate-mk-mk --max-failures=1               | ks-sq/mk-mk | agent workflows         | —                                                                                                                       | no                         | —                                            | pnpm --filter @interdomestik/web e2e:guards                                                                                                                                           | gotoApp+routes; added agentCrm/agentCommissions route helpers                              |
| apps/web/e2e/branches.spec.ts                 | ✅ DONE | page.goto, text-selector             | 0676284 | —                                                                                                                                                   | dashboard-page-ready                                                               | pnpm --filter @interdomestik/web test:e2e -- apps/web/e2e/branches.spec.ts --project=gate-ks-sq --project=gate-mk-mk --max-failures=1                 | ks-sq/mk-mk | branch admin data       | —                                                                                                                       | no                         | —                                            | pnpm --filter @interdomestik/web e2e:guards                                                                                                                                           | spec remains skipped (legacy table expectations); migrated navigation+routes only          |
| apps/web/e2e/claims.spec.ts                   | ✅ DONE | page.goto, text-selector             | 94a9946 | —                                                                                                                                                   | body/page-ready/claims-page-ready/new-claim-page-ready/dashboard-page-ready        | pnpm --filter @interdomestik/web test:e2e -- apps/web/e2e/claims.spec.ts --project=gate-ks-sq --project=gate-mk-mk --max-failures=1                   | ks-sq/mk-mk | claims list/detail      | —                                                                                                                       | no                         | unauth tests needed clean context            | pnpm --filter @interdomestik/web e2e:guards                                                                                                                                           | migrated to gotoApp+routes; unauth redirects use browser.newContext({storageState: empty}) |
| apps/web/e2e/staff.spec.ts                    | ✅ DONE | page.goto, text-selector             | 1d92c38 | —                                                                                                                                                   | dashboard-page-ready                                                               | pnpm --filter @interdomestik/web test:e2e -- apps/web/e2e/staff.spec.ts --project=gate-ks-sq --project=gate-mk-mk --max-failures=1                    | ks-sq/mk-mk | staff workflows         | —                                                                                                                       | no                         | mk-mk action link stayed on /staff/claims    | pnpm --filter @interdomestik/web e2e:guards                                                                                                                                           | strict gotoApp+routes; details navigate via href->gotoApp                                  |
| apps/web/e2e/public-pages.spec.ts             | ✅ DONE | page.goto, text-selector             | b795449 | stats-page-ready, stats-title, stats-verified-badge, stats-card-_, partners-page-ready, partners-categories, partners-category-_, partners-cta-link | stats-page-ready/partners-page-ready/pricing-page-ready                            | pnpm --filter @interdomestik/web test:e2e -- apps/web/e2e/public-pages.spec.ts --project=gate-ks-sq --project=gate-mk-mk --max-failures=1             | smoke       | public marketing pages  | apps/web/src/features/public/stats/components/StatsV2Page.tsx; apps/web/src/app/[locale]/partners/\_core.entry.tsx      | no                         | CTA linked to non-locale /pricing            | pnpm --filter @interdomestik/web e2e:guards                                                                                                                                           | migrated to gotoApp+routes; partners CTA now locale-aware                                  |
| apps/web/e2e/ops-center.spec.ts               | ✅ DONE | page.goto, text-selector             | 9cf87a7 | —                                                                                                                                                   | ops-center-page                                                                    | pnpm --filter @interdomestik/web test:e2e -- apps/web/e2e/ops-center.spec.ts --project=gate-ks-sq --project=gate-mk-mk --max-failures=1               | ks-sq/mk-mk | ops queues              | —                                                                                                                       | no                         | hardcoded mk state + /sq path assumptions    | pnpm --filter @interdomestik/web e2e:guards                                                                                                                                           | migrated to gotoApp+routes; use adminPage fixture instead of fixed storageState            |
| apps/web/e2e/claim-resolver-isolation.spec.ts | ✅ DONE | routes-contract, gotoApp+routes      | 6f174be | —                                                                                                                                                   | auth-ready/page-ready                                                              | pnpm --filter @interdomestik/web test:e2e -- apps/web/e2e/claim-resolver-isolation.spec.ts --project=gate-ks-sq --project=gate-mk-mk --max-failures=1 | ks-sq/mk-mk | isolation test          | —                                                                                                                       | no                         | TypeError: path.startsWith is not a function | pnpm --filter @interdomestik/web e2e:gate:fast                                                                                                                                        | migrated path.startsWith error; fixed routes.login fn usage                                |

### Additional Candidates (from static scans)

| Spec                                                | Status  | Reasons                               | Commit  | Testids added                               | Marker used                                 | Verification command                                                                                                                                        | Lane        | Lane rationale          | Touches UI?                                                                                              | Strict exceptions allowed? | Failure signature                 | Regression guard run                           | Notes                                                                                                 |
| --------------------------------------------------- | ------- | ------------------------------------- | ------- | ------------------------------------------- | ------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------- | ----------------------- | -------------------------------------------------------------------------------------------------------- | -------------------------- | --------------------------------- | ---------------------------------------------- | ----------------------------------------------------------------------------------------------------- |
| apps/web/e2e/claim-creation-traceability.spec.ts    | ✅ DONE | gotoApp+routes                        | e71ca98 | —                                           | ops-center-page/body                        | pnpm --filter @interdomestik/web test:e2e -- apps/web/e2e/claim-creation-traceability.spec.ts --project=gate-ks-sq --project=gate-mk-mk --max-failures=1    | ks-sq/mk-mk | claim detail integrity  | —                                                                                                        | no                         | —                                 | pnpm --filter @interdomestik/web e2e:guards    | strict gotoApp+routes; added routes.adminClaimByNumber() and removed env locale                       |
| apps/web/e2e/user-flow.spec.ts                      | ✅ DONE | page.goto                             | 672561f | —                                           | body                                        | pnpm --filter @interdomestik/web test:e2e -- apps/web/e2e/user-flow.spec.ts --project=gate-ks-sq --project=gate-mk-mk --max-failures=1                      | ks-sq/mk-mk | user onboarding         | —                                                                                                        | no                         | login button selector timeout     | pnpm --filter @interdomestik/web e2e:guards    | strict gotoApp+routes; used data-testid='login-submit' for stable selection                           |
| apps/web/e2e/security/headers.spec.ts               | ✅ DONE | gotoApp+routes                        | 4430adf | —                                           | body                                        | pnpm --filter @interdomestik/web test:e2e -- apps/web/e2e/security/headers.spec.ts --project=gate-ks-sq --project=gate-mk-mk --max-failures=1               | smoke       | headers smoke           | —                                                                                                        | no                         | —                                 | pnpm --filter @interdomestik/web e2e:guards    | strict gotoApp+routes; gotoApp returns Response for header assertions                                 |
| apps/web/e2e/member-settings.spec.ts                | ✅ DONE | page.goto, text-selector              | 692f748 | notification-settings-save                  | settings-page-ready/body                    | pnpm --filter @interdomestik/web test:e2e -- apps/web/e2e/member-settings.spec.ts --project=gate-ks-sq --project=gate-mk-mk --max-failures=1                | ks-sq/mk-mk | member settings         | apps/web/src/components/settings/notification-settings.tsx                                               | no                         | NotificationSettings loading race | pnpm --filter @interdomestik/web e2e:guards    | strict gotoApp+routes; wait for notification-settings-save before asserting preferences               |
| apps/web/e2e/visual/claims-dashboard.visual.spec.ts | ✅ DONE | @quarantine, page.goto, text-selector | (hash)  | —                                           | claims-page-ready/page-title                | pnpm --filter @interdomestik/web test:e2e -- apps/web/e2e/visual/claims-dashboard.visual.spec.ts --project=gate-ks-sq --project=gate-mk-mk --max-failures=1 | ks-sq/mk-mk | visual regression       | —                                                                                                        | no                         | —                                 | pnpm --filter @interdomestik/web e2e:gate:fast | migrated to gotoApp; skipped due to missing snapshots                                                 |
| apps/web/e2e/dashboard-stats.spec.ts                | ✅ DONE | page.goto, text-selector              | (hash)  | stats-card-_, stats-value-_                 | dashboard-heading                           | pnpm --filter @interdomestik/web test:e2e -- apps/web/e2e/dashboard-stats.spec.ts --project=gate-ks-sq --project=gate-mk-mk --max-failures=1                | ks-sq/mk-mk | stats dashboard         | apps/web/src/components/dashboard/member-dashboard-view.tsx                                              | no                         | —                                 | pnpm --filter @interdomestik/web e2e:gate:fast | migrated to gotoApp+routes; unskipped; added testids                                                  |
| apps/web/e2e/smoke_basic.spec.ts                    | ✅ DONE | page.goto                             | (hash)  | landing-page-ready, auth-ready              | landing-page-ready/auth-ready               | pnpm --filter @interdomestik/web test:e2e -- apps/web/e2e/smoke_basic.spec.ts --project=gate-ks-sq --project=gate-mk-mk --max-failures=1                    | smoke       | basic smoke             | apps/web/src/app/[locale]/page.tsx                                                                       | no                         | —                                 | pnpm --filter @interdomestik/web e2e:gate:fast | migrated to gotoApp; added landing-page-ready to home, used auth-ready on login                       |
| apps/web/e2e/pricing.spec.ts                        | ✅ DONE | page.goto, text-selector              | (hash)  | plan-card-_, plan-cta-_                     | pricing-page-ready                          | pnpm --filter @interdomestik/web test:e2e -- apps/web/e2e/pricing.spec.ts --project=gate-ks-sq --project=gate-mk-mk --max-failures=1                        | smoke       | marketing pages         | apps/web/src/components/pricing/pricing-table.tsx                                                        | no                         | —                                 | pnpm --filter @interdomestik/web e2e:gate:fast | migrated to gotoApp; unskipped auth test; reused existing testids                                     |
| apps/web/e2e/invariants.spec.ts                     | ✅ DONE | page.goto, ad-hoc-url                 | (hash)  | —                                           | landing-page-ready/auth-ready               | pnpm --filter @interdomestik/web test:e2e -- apps/web/e2e/invariants.spec.ts --project=gate-ks-sq --project=gate-mk-mk --max-failures=1                     | ks-sq/mk-mk | invariants checks       | —                                                                                                        | no                         | —                                 | pnpm --filter @interdomestik/web e2e:gate:fast | migrated to gotoApp; structured loop with explicit markers                                            |
| apps/web/e2e/sidebar-toggle.spec.ts                 | ✅ DONE | page.goto                             | (hash)  | sidebar-trigger                             | dashboard-page-ready                        | pnpm --filter @interdomestik/web test:e2e -- apps/web/e2e/sidebar-toggle.spec.ts --project=gate-ks-sq --project=gate-mk-mk --max-failures=1                 | ks-sq/mk-mk | navigation UI           | apps/web/src/app/[locale]/admin/\_core.entry.tsx                                                         | no                         | —                                 | pnpm --filter @interdomestik/web e2e:gate:fast | migrated to gotoApp; added sidebar-trigger testid                                                     |
| apps/web/e2e/agent.spec.ts                          | ✅ DONE | page.goto, text-selector              | (hash)  | crm-page-ready, leaderboard-card            | crm-page-ready/agent-home                   | pnpm --filter @interdomestik/web test:e2e -- apps/web/e2e/agent.spec.ts --project=gate-ks-sq --project=gate-mk-mk --max-failures=1                          | ks-sq/mk-mk | agent workflows         | apps/web/src/app/[locale]/(agent)/agent/crm/page.tsx, components/agent/leaderboard-card.tsx              | no                         | —                                 | pnpm --filter @interdomestik/web e2e:gate:fast | migrated to gotoApp; added testids; unskipped leaderboard test                                        |
| apps/web/e2e/claim-submission.spec.ts               | ✅ DONE | text-selector                         | (hash)  | input-_, wizard-_, new-claim-page-ready     | new-claim-page-ready/claims-page-ready      | pnpm --filter @interdomestik/web test:e2e -- apps/web/e2e/claim-submission.spec.ts --project=gate-ks-sq --project=gate-mk-mk --max-failures=1               | ks-sq/mk-mk | member claim submission | apps/web/src/components/claims/wizard-step-details.tsx, apps/web/src/components/claims/wizard-review.tsx | no                         | —                                 | pnpm --filter @interdomestik/web e2e:gate:fast | migrated to gotoApp; added testids to wizard inputs and review step; handled race condition on submit |
| apps/web/e2e/seeded-data.spec.ts                    | ✅ DONE | text-selector                         | (hash)  | claim-row, claim-status-badge               | claims-page-ready/claim-tracking-title      | pnpm --filter @interdomestik/web test:e2e -- apps/web/e2e/seeded-data.spec.ts --project=gate-ks-sq --project=gate-mk-mk --max-failures=1                    | ks-sq/mk-mk | seed verification       | apps/web/src/components/dashboard/claims/member-claims-table.tsx, claim-status-badge.tsx                 | no                         | —                                 | pnpm --filter @interdomestik/web e2e:gate:fast | migrated to gotoApp; added testids; test remains skipped in CI as seed data mismatch persists         |
| apps/web/e2e/staff-flow.spec.ts                     | ✅ DONE | text-selector                         | (hash)  | input-_, wizard-_, ops-table-row            | new-claim-page-ready/page-title             | pnpm --filter @interdomestik/web test:e2e -- apps/web/e2e/staff-flow.spec.ts --project=gate-ks-sq --project=gate-mk-mk --max-failures=1                     | ks-sq/mk-mk | staff workflows         | apps/web/src/components/agent/agent-claims-table.tsx, apps/web/src/components/ops/OpsTable.tsx           | no                         | —                                 | pnpm --filter @interdomestik/web e2e:gate:fast | migrated to gotoApp; added testids; test remains skipped in CI                                        |
| apps/web/e2e/member-number.spec.ts                  | ✅ DONE | no-marker                             | (hash)  | —                                           | registration-page-ready/auth-ready          | pnpm test:e2e apps/web/e2e/member-number.spec.ts                                                                                                            | ks-sq/mk-mk | production member       | —                                                                                                        | no                         | —                                 | pnpm e2e:gate:fast                             | verified marker existence in parent layout                                                            |
| apps/web/e2e/auth.spec.ts                           | ✅ DONE | page.goto, text-selector              | (hash)  | login-error                                 | auth-ready/registration-page-ready          | pnpm test:e2e apps/web/e2e/auth.spec.ts                                                                                                                     | ks-sq/mk-mk | auth flows              | apps/web/src/components/auth/login-form.tsx                                                              | no                         | login button timeout              | pnpm e2e:gate:fast                             | migrated to gotoApp+routes; added login-error testid                                                  |
| apps/web/e2e/messaging.spec.ts                      | ✅ DONE | text-selector                         | (hash)  | message-input, message-content              | claim-tracking-title                        | pnpm test:e2e apps/web/e2e/messaging.spec.ts                                                                                                                | ks-sq/mk-mk | messaging flows         | components/shared/claim-messenger.tsx, features/member/claims/components/MemberClaimDetailOpsPage.tsx    | no                         | missing messenger component       | pnpm e2e:gate:fast                             | migrated to gotoApp+routes; project-aware claim IDs; added messenger to member detail                 |
| apps/web/e2e/api-permissions.spec.ts                | ✅ DONE | —                                     | (hash)  | —                                           | —                                           | pnpm test:e2e apps/web/e2e/api-permissions.spec.ts                                                                                                          | smoke       | API security            | —                                                                                                        | no                         | —                                 | pnpm e2e:gate:fast                             | direct API requests only; uses authenticated fixtures                                                 |
| apps/web/e2e/evidence.spec.ts                       | ✅ DONE | text-selector                         | (hash)  | evidence-item                               | new-claim-page-ready                        | pnpm test:e2e apps/web/e2e/evidence.spec.ts                                                                                                                 | ks-sq/mk-mk | evidence uploads        | components/claims/wizard-step-evidence.tsx                                                               | no                         | brittle text selector             | pnpm e2e:gate:fast                             | migrated to gotoApp+routes; added evidence-item testid                                                |
| apps/web/e2e/branch-dashboard.spec.ts               | ✅ DONE | text-selector                         | (hash)  | branch-link, kpi-\*, branch-dashboard-title | dashboard-page-ready/branch-dashboard-title | pnpm test:e2e apps/web/e2e/branch-dashboard.spec.ts                                                                                                         | ks-sq/mk-mk | branch dashboards       | features/admin/branches/\*                                                                               | no                         | link click timeout                | pnpm e2e:gate:fast                             | migrated to gotoApp+routes; fixed code-vs-id link                                                     |
| apps/web/e2e/claim-routing.spec.ts                  | ✅ DONE | text-selector                         | (hash)  | data-title                                  | new-claim-page-ready/page-title             | pnpm test:e2e apps/web/e2e/claim-routing.spec.ts                                                                                                            | ks-sq/mk-mk | claim flow              | features/admin/claims/components/ClaimsOperationalList.tsx                                               | no                         | row identification                | pnpm e2e:gate:fast                             | migrated to gotoApp+routes; added data-title support                                                  |

## Exceptions (explicitly allowed)

These specs are allowed to retain raw navigation exceptions while maintaining strict invariants.

| Spec                                        | Rationale                              | Allowed exception | Invariants (must still hold)                                     | Verification command                                                                                                                                | Lane    |
| ------------------------------------------- | -------------------------------------- | ----------------- | ---------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------- | ------- |
| apps/web/e2e/gate/tenant-resolution.spec.ts | Validates host-first tenant resolution | `page.goto`       | host-first tenant, no locale-prefixed APIs, no ad-hoc URL concat | pnpm --filter @interdomestik/web test:e2e -- apps/web/e2e/gate/tenant-resolution.spec.ts --project=gate-ks-sq --project=gate-mk-mk --max-failures=1 | gate-\* |

## Notes

- Locale-prefixed API calls: none found in current static scan.
- Gate/tenant-resolution can be an explicit exception for raw navigation per strict rules.
- Legacy-only shim is available for non-migrated specs: `gotoAppLegacy` from apps/web/e2e/utils/navigation-legacy.ts. Remove usage when spec is fully migrated.
- Standardize on root command `pnpm e2e:gate:fast`; avoid `pnpm --filter @interdomestik/web e2e:gate:fast` unless that script is added to apps/web/package.json.
